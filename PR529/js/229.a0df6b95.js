"use strict";(self["webpackChunkcffinit"]=self["webpackChunkcffinit"]||[]).push([[229],{9125:(e,i,n)=>{n.r(i),n.d(i,{default:()=>K});var t=n(3673),r=n(2323);const o=(0,t.HX)("data-v-715ce0f6");(0,t.dD)("data-v-715ce0f6");const l={id:"metroline"},d={id:"form"},a=(0,t.Wm)("div",{id:"form-title"},[(0,t.Wm)("h1",{class:"page-title"}," Identifiers ")],-1),s={id:"form-content"},u={class:"question"},c=(0,t.Uk)(" What persistent identifiers are available for the work? "),v={class:"scroll-to-bottom-container"},m=(0,t.Wm)("span",{class:"bottom"},null,-1),p=(0,t.Uk)(" Add identifier "),f={id:"form-button-bar"};(0,t.Cn)();const b=o(((e,i,n,b,h,g)=>{const w=(0,t.up)("Stepper"),y=(0,t.up)("SchemaGuideLink"),W=(0,t.up)("IdentifierCardViewing"),I=(0,t.up)("IdentifierCardEditing"),k=(0,t.up)("q-btn"),x=(0,t.up)("q-banner"),C=(0,t.up)("StepperActions");return(0,t.wg)(),(0,t.j4)(t.HY,null,[(0,t.Wm)("div",l,[(0,t.Wm)(w)]),(0,t.Wm)("div",d,[a,(0,t.Wm)("div",s,[(0,t.Wm)("p",u,[c,(0,t.Wm)(y,{anchor:"#identifiers"})]),(0,t.Wm)("div",v,[m,(0,t.Wm)("div",null,[((0,t.wg)(!0),(0,t.j4)(t.HY,null,(0,t.Ko)(e.identifiers,((n,r)=>((0,t.wg)(),(0,t.j4)("div",{class:"q-mb-md q-mr-lg",key:r},[e.editingId!==r?((0,t.wg)(),(0,t.j4)(W,{key:0,index:r,identifier:n,"num-identifiers":e.identifiers.length,onEditPressed:()=>e.editingId=r,onMoveDown:i=>e.moveIdentifierDown(r),onMoveUp:i=>e.moveIdentifierUp(r)},null,8,["index","identifier","num-identifiers","onEditPressed","onMoveDown","onMoveUp"])):((0,t.wg)(),(0,t.j4)(I,(0,t.dG)({key:1,index:r},n,{"num-identifiers":e.identifiers.length,onUpdateType:e.setIdentifierTypeField,onUpdateValue:e.setIdentifierValueField,onUpdateDescription:e.setIdentifierDescriptionField,onClosePressed:i[1]||(i[1]=()=>e.editingId=-1),onRemovePressed:e.removeIdentifier,onMoveDown:i=>e.moveIdentifierDown(r),onMoveUp:i=>e.moveIdentifierUp(r)}),null,16,["index","num-identifiers","onUpdateType","onUpdateValue","onUpdateDescription","onRemovePressed","onMoveDown","onMoveUp"]))])))),128))])]),(0,t.Wm)(k,{class:"q-mt-md q-mb-md",color:"primary","no-caps":"",onClick:e.addIdentifier},{default:o((()=>[p])),_:1},8,["onClick"]),e.identifiersErrors.length>0?((0,t.wg)(),(0,t.j4)(x,{key:0,class:["bg-warning","text-negative",e.identifiersErrors.length>0?"has-error":""]},{default:o((()=>[((0,t.wg)(!0),(0,t.j4)(t.HY,null,(0,t.Ko)(e.identifiersErrors,((e,i)=>((0,t.wg)(),(0,t.j4)("div",{key:i},(0,r.zw)(e),1)))),128))])),_:1},8,["class"])):(0,t.kq)("",!0)]),(0,t.Wm)("div",f,[(0,t.Wm)(C)])])],64)}));var h=n(1959),g=n(1622),w=n(8222),y=n(2334);n(246);const W=(0,t.HX)("data-v-4bd71242");(0,t.dD)("data-v-4bd71242");const I={class:"items-center no-wrap"},k={class:"q-mt-md items-center no-wrap"},x={class:"row"},C={class:"q-mt-md items-center no-wrap"},U={class:"row"};(0,t.Cn)();const D=W(((e,i,n,o,l,d)=>{const a=(0,t.up)("q-option-group"),s=(0,t.up)("SchemaGuideLink"),u=(0,t.up)("q-label"),c=(0,t.up)("q-input"),v=(0,t.up)("q-card-section"),m=(0,t.up)("q-btn"),p=(0,t.up)("q-card-actions"),f=(0,t.up)("q-card");return(0,t.wg)(),(0,t.j4)(f,{flat:"",bordered:"",class:"bg-formcard q-pa-md"},{default:W((()=>[(0,t.Wm)(v,null,{default:W((()=>[(0,t.Wm)("div",I,[(0,t.Wm)(a,{inline:"",type:"radio","model-value":e.type,options:e.typeOptions,"onUpdate:modelValue":i[1]||(i[1]=i=>e.$emit("updateType","type",i))},null,8,["model-value","options"])]),(0,t.Wm)("div",k,[(0,t.Wm)("div",x,[(0,t.Wm)(u,{class:"text-dark"},{default:W((()=>[(0,t.Uk)(" What is the value of the "+(0,r.zw)(e.label)+"? ",1),(0,t.Wm)(s,{anchor:e.anchor},null,8,["anchor"])])),_:1})]),(0,t.Wm)(c,{"bg-color":"white",label:"Value",outlined:"",standout:"",dense:"",class:e.identifierValueErrors.length>0?"has-error":"",error:e.identifierValueErrors.length>0,"error-message":e.identifierValueErrors.join(", "),"model-value":e.value,"onUpdate:modelValue":i[2]||(i[2]=i=>e.$emit("updateValue","value",i)),ref:"valueRef"},null,8,["class","error","error-message","model-value"])]),(0,t.Wm)("div",C,[(0,t.Wm)("div",U,[(0,t.Wm)(u,{class:"text-dark"},{default:W((()=>[(0,t.Uk)(" What is the description for the "+(0,r.zw)(e.label)+"? ",1),(0,t.Wm)(s,{anchor:"#definitionsidentifier-description"})])),_:1})]),(0,t.Wm)(c,{"bg-color":"white",label:"Description",outlined:"",standout:"",dense:"","model-value":e.description,"onUpdate:modelValue":i[3]||(i[3]=i=>e.$emit("updateDescription","description",i))},null,8,["model-value"])])])),_:1}),(0,t.Wm)(p,{align:"right"},{default:W((()=>[(0,t.Wm)(m,{dense:"",color:"blue",disable:0==e.index,icon:"ion-arrow-up",tabindex:"-1",onClick:i[4]||(i[4]=i=>e.$emit("moveUp"))},null,8,["disable"]),(0,t.Wm)(m,{dense:"",color:"blue",disable:e.index>=e.numIdentifiers-1,icon:"ion-arrow-down",tabindex:"-1",onClick:i[5]||(i[5]=i=>e.$emit("moveDown"))},null,8,["disable"]),(0,t.Wm)(m,{color:"negative",dense:"",icon:"delete",label:"Remove",onClick:i[6]||(i[6]=i=>e.$emit("removePressed"))}),(0,t.Wm)(m,{dense:"",icon:"done",label:"Done",onClick:i[7]||(i[7]=i=>e.$emit("closePressed"))})])),_:1})])),_:1})}));var q=n(7996),V=n(8875);const E=(0,t.aZ)({name:"IdentifierCardEditing",props:{index:{type:Number,required:!0},type:{type:String,default:""},value:{type:String,default:""},description:{type:String,default:""},numIdentifiers:{type:Number,default:0}},components:{SchemaGuideLink:g.Z},setup(e){const{errors:i}=(0,V.V)(),n={doi:{label:"DOI",anchor:"#definitionsdoi"},url:{label:"URL",anchor:"#definitionsurl"},swh:{label:"Software Heritage identifier",anchor:"#definitionsswh-identifier"},other:{label:"identifier",anchor:"#definitionsidentifier"}},r=(0,h.iH)(null);(0,t.bv)((()=>{var e;null===(e=r.value)||void 0===e||e.focus()}));const o=(0,t.Fl)((()=>(0,q.lF)(e.index,["doi","url","swh","other"].indexOf(e.type)).filter((0,q.uY)(i.value)).map((e=>e.replace.message))));return{valueRef:r,typeOptions:[{label:"DOI",value:"doi"},{label:"URL",value:"url"},{label:"Software Heritage",value:"swh"},{label:"Other",value:"other"}],label:(0,t.Fl)((()=>n[e.type].label)),anchor:(0,t.Fl)((()=>n[e.type].anchor)),identifierValueErrors:o}},emits:["closePressed","removePressed","updateType","updateValue","updateDescription","moveUp","moveDown"]});var S=n(151),Z=n(5589),j=n(4140),_=n(4842),F=n(9367),O=n(2165),P=n(7518),H=n.n(P);E.render=D,E.__scopeId="data-v-4bd71242";const Q=E;H()(E,"components",{QCard:S.Z,QCardSection:Z.Z,QOptionGroup:j.Z,QInput:_.Z,QCardActions:F.Z,QBtn:O.Z});const $=(0,t.HX)("data-v-b2482fa8");(0,t.dD)("data-v-b2482fa8");const M={style:{"flex-grow":"1.0"}};(0,t.Cn)();const Y=$(((e,i,n,o,l,d)=>{const a=(0,t.up)("q-btn"),s=(0,t.up)("q-card");return(0,t.wg)(),(0,t.j4)(s,{bordered:"",class:["bg-formcard",e.identifierValueErrors.length>0?"red-border has-error":""],flat:"",style:{display:"flex","flex-direction":"row"}},{default:$((()=>[(0,t.Wm)("div",M,[(0,t.Wm)("ul",null,[(0,t.Wm)("li",null,(0,r.zw)(e.identifier.description),1),(0,t.Wm)("li",null,(0,r.zw)(e.identifier.type)+": "+(0,r.zw)(e.identifier.value),1)])]),(0,t.Wm)("div",null,[(0,t.Wm)(a,{class:"identifier-button",color:"blue",disable:0==e.index,icon:"ion-arrow-up",tabindex:"-1",onClick:i[1]||(i[1]=i=>e.$emit("moveUp"))},null,8,["disable"]),(0,t.Wm)(a,{class:"identifier-button",color:"blue",disable:e.index>=e.numIdentifiers-1,icon:"ion-arrow-down",tabindex:"-1",onClick:i[2]||(i[2]=i=>e.$emit("moveDown"))},null,8,["disable"]),(0,t.Wm)(a,{class:"identifier-button",color:"primary",flat:"","hover-color":"negative",icon:"edit",title:"Edit",onClick:i[3]||(i[3]=i=>e.$emit("editPressed"))})])])),_:1},8,["class"])})),A=(0,t.aZ)({name:"IdentifierCardViewing",props:{index:{type:Number,required:!0},identifier:{type:Object,required:!0},numIdentifiers:{type:Number,default:0}},setup(e){const{errors:i}=(0,V.V)(),n=(0,t.Fl)((()=>(0,q.lF)(e.index,["doi","url","swh","other"].indexOf(e.identifier.type)).filter((0,q.uY)(i.value)).map((e=>e.replace.message))));return{identifierValueErrors:n}},emits:["editPressed","moveDown","moveUp"]});A.render=Y,A.__scopeId="data-v-b2482fa8";const R=A;H()(A,"components",{QCard:S.Z,QBtn:O.Z});var z=n(1364),G=n(4009),L=n(2064),T=n(6513),B=function(e,i,n,t){function r(e){return e instanceof n?e:new n((function(i){i(e)}))}return new(n||(n=Promise))((function(n,o){function l(e){try{a(t.next(e))}catch(i){o(i)}}function d(e){try{a(t["throw"](e))}catch(i){o(i)}}function a(e){e.done?n(e.value):r(e.value).then(l,d)}a((t=t.apply(e,i||[])).next())}))};const N=(0,t.aZ)({name:"ScreenIdentifiers",components:{SchemaGuideLink:g.Z,Stepper:w.Z,StepperActions:y.Z,IdentifierCardEditing:Q,IdentifierCardViewing:R},setup(){(0,t.ic)((()=>{const{setErrorStateScreenIdentifiers:e}=(0,T.v)();e(document.getElementsByClassName("has-error").length>0)}));const{identifiers:e,setIdentifiers:i}=(0,z.Y)(),{errors:n}=(0,V.V)(),r=(0,h.iH)(-1),o=()=>B(this,void 0,void 0,(function*(){let n;const o={type:"doi",value:"",description:void 0};n=void 0===e.value?[o]:[...e.value,o],i(n),r.value=n.length-1,yield(0,t.Y3)(),(0,G.O)()})),l=()=>{if(void 0!==e.value){const n=[...e.value];n.splice(r.value,1),i(n),r.value=-1,Array.isArray(n)&&0===n.length&&i(void 0)}},d=(n,t)=>{if(void 0!==e.value){const n=Object.assign({},e.value[r.value]);n.description=""===t?void 0:t,e.value[r.value]=n,i(e.value)}},a=(n,t)=>{if(void 0!==e.value){const n=Object.assign({},e.value[r.value]);n.type=t,e.value[r.value]=n,i(e.value)}},s=(n,t)=>{if(void 0!==e.value){const n=Object.assign({},e.value[r.value]);n.value=t,e.value[r.value]=n,i(e.value)}},u=n=>{void 0!==e.value&&((0,L.A)(n,e.value,i),r.value===n&&n>0?r.value=r.value-1:r.value===n-1&&(r.value=r.value+1))},c=n=>{void 0!==e.value&&((0,L.v)(n,e.value,i),r.value===n&&n<e.value.length-1?r.value=r.value+1:r.value===n+1&&(r.value=r.value-1))},v=(0,t.Fl)((()=>q.I3.filter((0,q.uY)(n.value)).map((e=>e.replace.message))));return{addIdentifier:o,editingId:r,identifiers:e,identifiersErrors:v,moveIdentifierUp:u,moveIdentifierDown:c,removeIdentifier:l,setIdentifierDescriptionField:d,setIdentifierTypeField:a,setIdentifierValueField:s}}});var X=n(5607);N.render=b,N.__scopeId="data-v-715ce0f6";const K=N;H()(N,"components",{QBtn:O.Z,QBanner:X.Z})}}]);