"use strict";(self["webpackChunkcffinit"]=self["webpackChunkcffinit"]||[]).push([[170],{6486:(e,r,o)=>{o.r(r),o.d(r,{default:()=>G});var a=o(3673),t=o(2323);const n=(0,a.HX)("data-v-85a00a42");(0,a.dD)("data-v-85a00a42");const l={id:"metroline"},i={id:"form"},s=(0,a.Wm)("div",{id:"form-title"},[(0,a.Wm)("h1",{class:"page-title"}," Authors ")],-1),u={id:"form-content"},d={class:"question"},m=(0,a.Uk)(" Who are the author(s) of the work? "),c={class:"scroll-to-bottom-container"},v=(0,a.Wm)("span",{class:"bottom"},null,-1),h=(0,a.Uk)(" Add author "),p={id:"form-button-bar"};(0,a.Cn)();const f=n(((e,r,o,f,g,b)=>{const w=(0,a.up)("Stepper"),E=(0,a.up)("SchemaGuideLink"),y=(0,a.up)("AuthorCardViewing"),x=(0,a.up)("AuthorCardEditing"),W=(0,a.up)("q-btn"),A=(0,a.up)("q-banner"),k=(0,a.up)("StepperActions");return(0,a.wg)(),(0,a.j4)(a.HY,null,[(0,a.Wm)("div",l,[(0,a.Wm)(w)]),(0,a.Wm)("div",i,[s,(0,a.Wm)("div",u,[(0,a.Wm)("p",d,[m,(0,a.Wm)(E,{anchor:"#authors"})]),(0,a.Wm)("div",c,[v,(0,a.Wm)("div",null,[((0,a.wg)(!0),(0,a.j4)(a.HY,null,(0,a.Ko)(e.authors,((o,t)=>((0,a.wg)(),(0,a.j4)("div",{class:"q-mb-md q-mr-lg",key:t},[e.editingId!==t?((0,a.wg)(),(0,a.j4)(y,{key:0,index:t,author:o,"num-authors":e.authors.length,onEditPressed:()=>e.editingId=t,onMoveDown:r=>e.moveAuthorDown(t),onMoveUp:r=>e.moveAuthorUp(t)},null,8,["index","author","num-authors","onEditPressed","onMoveDown","onMoveUp"])):((0,a.wg)(),(0,a.j4)(x,(0,a.dG)({key:1,index:t,"num-authors":e.authors.length},o,{onUpdate:e.setAuthorField,onClosePressed:r[1]||(r[1]=()=>e.editingId=-1),onRemovePressed:e.removeAuthor,onMoveDown:r=>e.moveAuthorDown(t),onMoveUp:r=>e.moveAuthorUp(t)}),null,16,["index","num-authors","onUpdate","onRemovePressed","onMoveDown","onMoveUp"]))])))),128))])]),(0,a.Wm)(W,{class:"q-mt-md q-mb-md",color:"primary","no-caps":"",onClick:e.addAuthor},{default:n((()=>[h])),_:1},8,["onClick"]),e.authorsErrors.messages.length>0?((0,a.wg)(),(0,a.j4)(A,{key:0,class:"bg-warning text-negative"},{default:n((()=>[((0,a.wg)(!0),(0,a.j4)(a.HY,null,(0,a.Ko)(e.authorsErrors.messages,((e,r)=>((0,a.wg)(),(0,a.j4)("div",{key:r},(0,t.zw)(e),1)))),128))])),_:1})):(0,a.kq)("",!0)]),(0,a.Wm)("div",p,[(0,a.Wm)(k)])])],64)}));var g=o(1959),b=o(2635),w=o(525),E=o(2334);const y=(0,a.HX)("data-v-7c344a89");(0,a.dD)("data-v-7c344a89");const x={class:"row"},W={class:"row"},A={class:"row"},k={class:"row"};(0,a.Cn)();const C=y(((e,r,o,n,l,i)=>{const s=(0,a.up)("q-input"),u=(0,a.up)("q-banner"),d=(0,a.up)("q-btn"),m=(0,a.up)("q-card-actions"),c=(0,a.up)("q-card");return(0,a.wg)(),(0,a.j4)(c,{flat:"",bordered:"",class:"bg-formcard q-pa-md"},{default:y((()=>[(0,a.Wm)("div",x,[(0,a.Wm)(s,{"bg-color":"white",class:"col",dense:"",label:"given-names",outlined:"",standout:"",title:"The person's given names.","model-value":e.givenNames,error:e.givenNamesError.hasError,"error-message":e.givenNamesError.messages.join(", "),"onUpdate:modelValue":r[1]||(r[1]=r=>e.$emit("update","givenNames",r)),ref:"givenNamesRef"},null,8,["model-value","error","error-message"])]),(0,a.Wm)("div",W,[(0,a.Wm)(s,{"bg-color":"white",class:"col-3",dense:"",label:"name-particle",outlined:"",standout:"",title:"The person's name particle, e.g., a nobiliary particle or a [preposition] meaning 'of' or 'from' (for example 'von' in 'Alexander von Humboldt').","model-value":e.nameParticle,error:e.nameParticleError.hasError,"error-message":e.nameParticleError.messages.join(", "),"onUpdate:modelValue":r[2]||(r[2]=r=>e.$emit("update","nameParticle",r))},null,8,["model-value","error","error-message"]),(0,a.Wm)(s,{"bg-color":"white",class:"col",dense:"",label:"family-names",outlined:"",standout:"",title:"The person's family names.","model-value":e.familyNames,error:e.familyNamesError.hasError,"error-message":e.familyNamesError.messages.join(", "),"onUpdate:modelValue":r[3]||(r[3]=r=>e.$emit("update","familyNames",r))},null,8,["model-value","error","error-message"]),(0,a.Wm)(s,{"bg-color":"white",class:"col-3",dense:"",label:"name-suffix",outlined:"",standout:"",title:"The person's name suffix, e.g. 'Jr.' for Sammy Davis Jr. or 'III' for Frank Edwin Wright III.","model-value":e.nameSuffix,error:e.nameSuffixError.hasError,"error-message":e.nameSuffixError.messages.join(", "),"onUpdate:modelValue":r[4]||(r[4]=r=>e.$emit("update","nameSuffix",r))},null,8,["model-value","error","error-message"])]),(0,a.Wm)("div",A,[(0,a.Wm)(s,{"bg-color":"white",class:"col",dense:"",label:"email",outlined:"",standout:"",title:"The person's email address.",type:"email","model-value":e.email,error:e.emailError.hasError,"error-message":e.emailError.messages.join(", "),"onUpdate:modelValue":r[5]||(r[5]=r=>e.$emit("update","email",r))},null,8,["model-value","error","error-message"])]),(0,a.Wm)("div",k,[(0,a.Wm)(s,{"bg-color":"white",class:"col",dense:"",label:"affiliation",outlined:"",standout:"",title:"The person's affiliation.","model-value":e.affiliation,error:e.affiliationError.hasError,"error-message":e.affiliationError.messages.join(", "),"onUpdate:modelValue":r[6]||(r[6]=r=>e.$emit("update","affiliation",r))},null,8,["model-value","error","error-message"]),(0,a.Wm)(s,{"bg-color":"white",class:"col",dense:"",hint:"Format: https://orcid.org/0000-0000-0000-0000",label:"orcid",outlined:"",standout:"",title:"The person's ORCID identifier.","model-value":e.orcid,error:e.orcidError.hasError,"error-message":e.orcidError.messages.join(", "),"onUpdate:modelValue":r[7]||(r[7]=r=>e.$emit("update","orcid",r))},null,8,["model-value","error","error-message"])]),e.authorErrors.messages.length>0?((0,a.wg)(),(0,a.j4)(u,{key:0,class:"bg-warning text-negative"},{default:y((()=>[((0,a.wg)(!0),(0,a.j4)(a.HY,null,(0,a.Ko)(e.authorErrors.messages,((e,r)=>((0,a.wg)(),(0,a.j4)("div",{key:r},(0,t.zw)(e),1)))),128))])),_:1})):(0,a.kq)("",!0),(0,a.Wm)(m,{align:"right"},{default:y((()=>[(0,a.Wm)(d,{color:"blue",dense:"",disable:0==e.index,icon:"ion-arrow-up",tabindex:"-1",onClick:r[8]||(r[8]=r=>e.$emit("moveUp"))},null,8,["disable"]),(0,a.Wm)(d,{color:"blue",dense:"",disable:e.index>=e.numAuthors-1,icon:"ion-arrow-down",tabindex:"-1",onClick:r[9]||(r[9]=r=>e.$emit("moveDown"))},null,8,["disable"]),(0,a.Wm)(d,{color:"negative",dense:"",icon:"delete",label:"Remove",onClick:r[10]||(r[10]=r=>e.$emit("removePressed"))}),(0,a.Wm)(d,{dense:"",icon:"done",label:"Done",onClick:r[11]||(r[11]=r=>e.$emit("closePressed"))})])),_:1})])),_:1})}));var j=o(3281),I=o(9152);const S=(0,a.aZ)({name:"AuthorCardEditing",props:{index:{type:Number,required:!0},givenNames:{type:String,default:""},nameParticle:{type:String,default:""},familyNames:{type:String,default:""},nameSuffix:{type:String,default:""},email:{type:String,default:""},affiliation:{type:String,default:""},orcid:{type:String,default:""},numAuthors:{type:Number,default:0}},setup(e){const r=(0,g.iH)(null);return(0,a.bv)((()=>{var e;null===(e=r.value)||void 0===e||e.focus()})),{givenNamesRef:r,givenNamesError:(0,a.Fl)((()=>(0,j.I)(`/authors/${e.index}/given-names`))),nameParticleError:(0,a.Fl)((()=>(0,j.I)(`/authors/${e.index}/name-particle`))),familyNamesError:(0,a.Fl)((()=>(0,j.I)(`/authors/${e.index}/family-names`))),nameSuffixError:(0,a.Fl)((()=>(0,j.I)(`/authors/${e.index}/name-suffix`))),emailError:(0,a.Fl)((()=>(0,j.I)(`/authors/${e.index}/email`))),affiliationError:(0,a.Fl)((()=>(0,j.I)(`/authors/${e.index}/affiliation`))),orcidError:(0,a.Fl)((()=>(0,j.I)(`/authors/${e.index}/orcid`))),authorErrors:(0,a.Fl)((()=>(0,I.p)(e.index)))}},emits:["closePressed","removePressed","update","moveUp","moveDown"]});var U=o(151),$=o(4842),q=o(5607),N=o(9367),P=o(2165),D=o(7518),Z=o.n(D);S.render=C,S.__scopeId="data-v-7c344a89";const F=S;Z()(S,"components",{QCard:U.Z,QInput:$.Z,QBanner:q.Z,QCardActions:N.Z,QBtn:P.Z});const _=(0,a.HX)("data-v-97d818c2");(0,a.dD)("data-v-97d818c2");const H={style:{"flex-grow":"1.0"}};(0,a.Cn)();const V=_(((e,r,o,n,l,i)=>{const s=(0,a.up)("q-btn"),u=(0,a.up)("q-card");return(0,a.wg)(),(0,a.j4)(u,{bordered:"",class:["bg-formcard",e.authorErrors.hasError?"red-border":""],flat:"",style:{display:"flex","flex-direction":"row"}},{default:_((()=>[(0,a.Wm)("div",H,[(0,a.Wm)("ul",null,[(0,a.Wm)("li",null,(0,t.zw)(e.author.givenNames)+" "+(0,t.zw)(e.author.nameParticle)+" "+(0,t.zw)(e.author.familyNames)+" "+(0,t.zw)(e.author.nameSuffix),1),(0,a.Wm)("li",null,(0,t.zw)(e.author.email),1),(0,a.Wm)("li",null,(0,t.zw)(e.author.affiliation)+" "+(0,t.zw)(e.author.orcid),1)])]),(0,a.Wm)("div",null,[(0,a.Wm)(s,{class:"author-button",color:"blue",disable:0==e.index,icon:"ion-arrow-up",tabindex:"-1",onClick:r[1]||(r[1]=r=>e.$emit("moveUp"))},null,8,["disable"]),(0,a.Wm)(s,{class:"author-button",color:"blue",disable:e.index>=e.numAuthors-1,icon:"ion-arrow-down",tabindex:"-1",onClick:r[2]||(r[2]=r=>e.$emit("moveDown"))},null,8,["disable"]),(0,a.Wm)(s,{class:"author-button",color:"primary",flat:"","hover-color":"negative",icon:"edit",title:"Edit",onClick:r[3]||(r[3]=r=>e.$emit("editPressed"))})])])),_:1},8,["class"])})),z=(0,a.aZ)({name:"AuthorCardViewing",props:{index:{type:Number,required:!0},author:{type:Object,required:!0},numAuthors:{type:Number,default:0}},setup(e){return{authorErrors:(0,a.Fl)((()=>(0,I.p)(e.index)))}},emits:["editPressed","moveDown","moveUp"]});z.render=V,z.__scopeId="data-v-97d818c2";const Q=z;Z()(z,"components",{QCard:U.Z,QBtn:P.Z});var M=o(2064),T=o(1364),R=o(4009),Y=o(5093),B=function(e,r,o,a){function t(e){return e instanceof o?e:new o((function(r){r(e)}))}return new(o||(o=Promise))((function(o,n){function l(e){try{s(a.next(e))}catch(r){n(r)}}function i(e){try{s(a["throw"](e))}catch(r){n(r)}}function s(e){e.done?o(e.value):t(e.value).then(l,i)}s((a=a.apply(e,r||[])).next())}))};const O=(0,a.aZ)({name:"ScreenAuthors",components:{SchemaGuideLink:b.Z,Stepper:w.Z,StepperActions:E.Z,AuthorCardEditing:F,AuthorCardViewing:Q},setup(){const{authors:e,setAuthors:r}=(0,T.Y)(),o=(0,g.iH)(0),t=()=>B(this,void 0,void 0,(function*(){let t;const n={};t=void 0===e.value?[n]:[...e.value,n],r(t),o.value=t.length-1,yield(0,a.Y3)(),(0,R.O)()})),n=()=>{if(void 0!==e.value){const a=[...e.value];a.splice(o.value,1),r(a),o.value=-1,Array.isArray(a)&&0===a.length&&r(void 0)}},l=(a,t)=>{if(void 0!==e.value){const n=Object.assign({},e.value[o.value]);n[a]=""===t?void 0:t,e.value[o.value]=n,r(e.value)}},i=a=>{void 0!==e.value&&((0,M.A)(a,e.value,r),o.value===a&&a>0?o.value=o.value-1:o.value===a-1&&(o.value=o.value+1))},s=a=>{void 0!==e.value&&((0,M.v)(a,e.value,r),o.value===a&&a<e.value.length-1?o.value=o.value+1:o.value===a+1&&(o.value=o.value-1))};return{addAuthor:t,authors:e,editingId:o,moveAuthorDown:s,moveAuthorUp:i,removeAuthor:n,setAuthorField:l,authorsErrors:(0,a.Fl)((()=>(0,Y.e)(e.value)))}}});O.render=f,O.__scopeId="data-v-85a00a42";const G=O;Z()(O,"components",{QBtn:P.Z,QBanner:q.Z})}}]);